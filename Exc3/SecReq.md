# Требования для внешних интеграций

## Требования к безопасности

- взаимодействие с внешними сервисами через firewall. Запрет на подключение с неизвестных адресов, ограниченный список портов
- шифрованное соединение. mTLS между сервисами
- сегментирование сети в целом с дополнительными сетевыми экранами между сегментами
- логирование событий безопасности
- обезличивание данных при хранении и передаче (относящихся к личным)
- отсутствие кеширования личных данных
- Rate Limiting для внешних сервисов

## Протоколы аутентификации и авторизации

OAuth 2.0 Client Credentials Grant

## Описание механизмов взаимодействия

Для обеих интеграций будет работать один и тот же сценарий логики работы:

- устанавливается безопасное соединение
- проходит процедура получения токена
- внешняя интеграция отправляет данные на проверку (в случае с домофоном - это некая хэш сумма, сделанная по известному алгоритму; в случае с номером автомобиля - опять же хэш распознанного номера). Данные так же обогащаются прочей нужной информацией (например id внешнего клиента, временной меткой, контрольной суммой и т.д.)
- в smart-core-service производится проверка данных. В случае соблюдения условий получения доступа к объекту возвращается положительный ответ, иначе отрицательный
